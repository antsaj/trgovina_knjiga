import{_ as w,b as g,r as o,o as l,d as s,w as e,e as n,f as $,h as a,c as C,i as y,F as j,j as z,t as i}from"./index-0583e027.js";const D={data(){return{orders:[]}},mounted(){this.fetchOrders()},methods:{fetchOrders(){const c=localStorage.getItem("token");g.get("http://localhost:8000/api/cart",{headers:{Authorization:`Bearer ${c}`}}).then(t=>{this.orders=t.data}).catch(t=>{console.error("Greška prilikom dohvaćanja narudžbi:",t.response?t.response.data:t.message)})},cancelOrder(c){const t=localStorage.getItem("token");g.delete(`http://localhost:8000/api/order/${c}`,{headers:{Authorization:`Bearer ${t}`}}).then(_=>{alert("Narudžba uspješno poništena!"),this.orders=this.orders.filter(m=>m.id!==c)}).catch(_=>{console.error("Greška prilikom poništavanja narudžbe:",_.response?_.response.data:_.message),alert("Greška prilikom poništavanja narudžbe!")})},checkout(){this.$router.push({name:"Checkout"})}}};function G(c,t,_,m,p,k){const x=o("v-alert"),v=o("v-list-item-title"),d=o("v-list-item-subtitle"),f=o("v-list-item-content"),h=o("v-list"),b=o("v-btn"),B=o("v-list-item"),V=o("v-col"),N=o("v-row"),O=o("v-container");return l(),s(O,null,{default:e(()=>[n(N,null,{default:e(()=>[n(V,{cols:"12"},{default:e(()=>[t[3]||(t[3]=$("h2",null,"Vaša košarica",-1)),p.orders.length===0?(l(),s(x,{key:0,type:"info"},{default:e(()=>t[0]||(t[0]=[a(" Vaša košarica je prazna. ")])),_:1})):(l(),s(h,{key:1},{default:e(()=>[(l(!0),C(j,null,y(p.orders,r=>(l(),s(B,{key:r.id},{default:e(()=>[n(f,null,{default:e(()=>[n(v,null,{default:e(()=>[a("Order ID: "+i(r.id),1)]),_:2},1024),n(d,null,{default:e(()=>[a("Ukupna cijena: "+i(r.total_price)+" €",1)]),_:2},1024),n(d,null,{default:e(()=>[a("Datum narudžbe: "+i(r.order_date),1)]),_:2},1024),(l(!0),C(j,null,y(r.order_items,u=>(l(),s(h,{key:u.id},{default:e(()=>[n(f,null,{default:e(()=>[n(v,null,{default:e(()=>[a("Knjiga: "+i(u.book.title),1)]),_:2},1024),n(d,null,{default:e(()=>[a("Količina: "+i(u.quantity),1)]),_:2},1024),n(d,null,{default:e(()=>[a("Cijena: "+i(u.price)+" €",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),n(b,{color:"red",onClick:u=>k.cancelOrder(r.id)},{default:e(()=>t[1]||(t[1]=[a("Poništi narudžbu")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),p.orders.length>0?(l(),s(b,{key:0,color:"black",onClick:k.checkout},{default:e(()=>t[2]||(t[2]=[a("Završi kupovinu")])),_:1},8,["onClick"])):z("",!0)]),_:1}))]),_:1})]),_:1})]),_:1})}const S=w(D,[["render",G],["__scopeId","data-v-36e488b2"]]);export{S as default};
